<!DOCTYPE html>
<html>
  <head>
    <title>2D Nav Goal Publisher</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/roslibjs/0.20.0/roslib.min.js"></script>
    <script>
      // Connect to the rosbridge server
      var ros = new ROSLIB.Ros({
        url : 'ws://localhost:9090'
      });
      
      // Create a publisher for the 2D Nav Goal message
      var publisher = new ROSLIB.Topic({
        ros : ros,
        name : '/move_base_simple/goal',
        messageType : 'geometry_msgs/PoseStamped'
      });
      
      // Function to publish a 2D Nav Goal message
      function publishGoal() {
        // Get the X, Y, and angle values from the user input fields
        var x = parseFloat(document.getElementById('x').value);
        var y = parseFloat(document.getElementById('y').value);
        var angle = parseFloat(document.getElementById('angle').value);
        
        // Create a new 2D Nav Goal message
        var goal = new ROSLIB.Message({
          header : {
            seq : 0,
            stamp : { sec : 0, nsec : 0 },
            frame_id : 'map'
          },
          pose : {
            position : {
              x : x,
              y : y,
              z : 0.0
            },
            orientation : {
              x : 0.0,
              y : 0.0,
              z : Math.sin(angle / 2.0),
              w : Math.cos(angle / 2.0)
            }
          }
        });
        
        // Publish the goal message
        publisher.publish(goal);
      }
    </script>
  </head>
  <body>
    <h1>2D Nav Goal Publisher</h1>
    <label for="x">X:</label>
    <input type="number" id="x" name="x" step="0.1" value="0.0"><br>
    <label for="y">Y:</label>
    <input type="number" id="y" name="y" step="0.1" value="0.0"><br>
    <label for="angle">Angle:</label>
    <input type="number" id="angle" name="angle" step="0.1" value="0.0"><br>
    <button onclick="publishGoal()">Publish Goal</button>
  </body>
</html>
